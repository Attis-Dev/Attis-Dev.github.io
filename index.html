<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AttiHack Manifest Generator</title>
  <style>
    body {
      background-color: black;
      color: #00ff00;
      font-family: monospace;
      padding: 20px;
    }
    h1 {
      text-align: center;
      font-size: 2em;
      margin-bottom: 10px;
    }
    pre.logo {
      text-align: center;
      font-size: 1.2em;
      color: #00ff88;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background-color: #111;
      padding: 20px;
      border: 2px solid #00ff00;
      border-radius: 10px;
    }
    label, select, input, button {
      display: block;
      margin: 10px 0;
      width: 100%;
      background-color: black;
      color: #00ff00;
      border: 1px solid #00ff00;
      padding: 10px;
      border-radius: 5px;
    }
    button {
      cursor: pointer;
    }
  </style>
</head>
<body>

  <pre class="logo">
     _____     _   _ _            _    
    |  _  |___| |_|_| |___ ___   | |_  
    |     | . |  _| | | . |  _|  | '_| 
    |__|__|___|_| |_|_|___|_|    |_|  
        Manifest Generator by Atti
  </pre>

  <div class="container">
    <h1>Steam AppManifest Generátor</h1>

    <label for="gameSelect">Válassz játékot:</label>
    <select id="gameSelect">
      <option value="">-- Válassz vagy írj be AppID-t --</option>
      <option value="892970">Valheim</option>
      <option value="1245620">ELDEN RING</option>
      <option value="1086940">Baldur's Gate 3</option>
      <option value="1623730">Palworld</option>
      <option value="553850">Helldivers™ 2</option>
      <option value="271590">GTA V</option>
    </select>

    <label for="appid">Vagy írd be az AppID-t:</label>
    <input type="text" id="appid" placeholder="pl. 892970" />

    <label for="gameName">Játék neve:</label>
    <input type="text" id="gameName" readonly placeholder="Lekérés folyamatban..." />

    <button onclick="generateManifest()">Manifest generálása</button>
  </div>

  <script>
    const gameSelect = document.getElementById("gameSelect");
    const appidInput = document.getElementById("appid");
    const gameNameInput = document.getElementById("gameName");

    gameSelect.addEventListener("change", () => {
      if (gameSelect.value) {
        appidInput.value = gameSelect.value;
        fetchGameName(gameSelect.value);
      }
    });

    appidInput.addEventListener("input", () => {
      if (appidInput.value.length > 3) {
        fetchGameName(appidInput.value);
      }
    });

    function fetchGameName(appid) {
      fetch(`https://store.steampowered.com/api/appdetails?appids=${appid}`)
        .then(response => response.json())
        .then(data => {
          const name = data[appid]?.data?.name || "Ismeretlen játék";
          gameNameInput.value = name;
        })
        .catch(() => {
          gameNameInput.value = "Hiba történt";
        });
    }

    function generateManifest() {
      const appid = appidInput.value.trim();
      const name = gameNameInput.value.trim().replace(/[^\w\s]/gi, "").replace(/\s+/g, "_") || "Unknown";

      if (!appid) {
        alert("Adj meg egy AppID-t!");
        return;
      }

      const content = `"AppState"
{
  "AppID" "${appid}"
  "Universe" "1"
  "installdir" "${name}"
  "StateFlags" "1026"
}`;

      const blob = new Blob([content], { type: "text/plain" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = `appmanifest_${appid}.acf`;
      a.click();
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
